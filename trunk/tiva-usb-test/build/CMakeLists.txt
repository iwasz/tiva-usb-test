CMAKE_MINIMUM_REQUIRED (VERSION 2.8)
SET (CMAKE_VERBOSE_MAKEFILE OFF) 

PROJECT (tiva-usb-test)
include (tm4c123.cmake)

INCLUDE_DIRECTORIES("../src/")
AUX_SOURCE_DIRECTORY ("../src/" APP_SOURCES)

ADD_EXECUTABLE(${CMAKE_PROJECT_NAME}.elf ${APP_SOURCES})

FIND_PROGRAM (OPENOCD_EXECUTABLE openocd)
ADD_CUSTOM_TARGET("upload" DEPENDS ${CMAKE_PROJECT_NAME}.elf COMMAND ${OPENOCD_EXECUTABLE} -f /usr/share/openocd/scripts/board/ek-lm4f120xl.cfg -c 'program ${CMAKE_PROJECT_NAME}.elf verify reset')

